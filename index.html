<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>è¡Œå‹•ä»£è™Ÿï¼šä¸€äº›é¦¬çˆ¾åœ°å¤«</title>
    
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+TC:wght@300;400;500;700&display=swap" rel="stylesheet">
    
    <style>
        body { font-family: 'Noto Sans TC', sans-serif; }
        .pb-safe { padding-bottom: env(safe-area-inset-bottom, 20px); }
        .no-scrollbar::-webkit-scrollbar { display: none; }
        .no-scrollbar { -ms-overflow-style: none; scrollbar-width: none; }
        @keyframes fade-in { from { opacity: 0; } to { opacity: 1; } }
        @keyframes slide-up { from { transform: translateY(20px); opacity: 0; } to { transform: translateY(0); opacity: 1; } }
        .animate-fade-in { animation: fade-in 0.2s ease-out; }
        .animate-slide-up { animation: slide-up 0.3s ease-out; }
    </style>
</head>
<body class="bg-slate-50 text-slate-900">
    <div id="root"></div>

    <!-- React & Libraries via ESM -->
    <script type="module">
        import React, { useState, useEffect, useRef } from 'https://esm.sh/react@18.2.0';
        import ReactDOM from 'https://esm.sh/react-dom@18.2.0/client';
        import { 
            Plane, MapPin, Hotel, Sun, Moon, Coffee, Camera, Utensils, 
            Info, X, Navigation, CloudSun, Umbrella, Waves, CreditCard, Zap, Globe, Users
        } from 'https://esm.sh/lucide-react@0.263.1';

        // --- Data ---
        const WEATHER_MOCK = {
          "Taipei": { temp: "18Â°C", cond: "Cloudy", icon: CloudSun },
          "Singapore": { temp: "29Â°C", cond: "Thunderstorm", icon: Umbrella },
          "MalÃ©": { temp: "30Â°C", cond: "Sunny", icon: Sun },
          "Meeru Island": { temp: "31Â°C", cond: "Clear", icon: Waves },
        };

        const FRIENDS_DATA = [
          { name: "Jonathon Tree", image: "avatar/Jonathon Tree.jfif", quote: "è¿«ä¸åŠå¾…æƒ³è·³é€²æ¸…æ¾ˆçš„æµ·æ°´è£¡ï¼" },
          { name: "çŽ‹ä¼¯å®‰", image: "avatar/çŽ‹ä¼¯å®‰.jfif", quote: "æœŸå¾…åœ¨é¦¬çˆ¾åœ°å¤«çš„æ˜Ÿç©ºä¸‹æ”¾ç©ºï¼" },
          { name: "å³å…¨å‹³", image: "avatar/å³å…¨å‹³.jpg", quote: "æº–å‚™å¥½è¿ŽæŽ¥å¤§æµ·èˆ‡é™½å…‰äº†å—Žï¼Ÿ" },
          { name: "å³å®œç‘¾", image: "avatar/å³å®œç‘¾.jfif", quote: "é™½å…‰ã€æ²™ç˜ã€æµ·æµªï¼Œç¾Žå¥½å‡æœŸçš„é–‹å§‹ã€‚" },
          { name: "æž—ç­–", image: "avatar/æž—ç­–.jfif", quote: "é€™è¶Ÿæ—…ç¨‹ä¸€å®šæœƒå……æ»¿é›£å¿˜çš„å›žæ†¶ï¼" },
          { name: "æž—è–ç¿”", image: "avatar/æž—è–ç¿”.jfif", quote: "äº«å—æµ·å³¶çš„æ‚ é–’æ™‚å…‰èˆ‡éŸ³æ¨‚ã€‚" },
          { name: "æž—ç¿°å¹³", image: "avatar/æž—ç¿°å¹³.jfif", quote: "æŽ¢ç´¢ä¸–ç•Œçš„æ¯ä¸€å€‹è§’è½ã€‚" },
          { name: "å¾å³éœ–", image: "avatar/å¾å³éœ–.jfif", quote: "å……é£½é›»ï¼Œç¹¼çºŒå‘å‰è¡Œï¼" },
          { name: "éƒ­æŸé´»", image: "avatar/éƒ­æŸé´».jfif", quote: "å¸Œæœ›èƒ½æ‹å‡ºäººç”Ÿä»£è¡¨ä½œç…§ç‰‡ã€‚" },
          { name: "é™³æŸç›", image: "avatar/é™³æŸç›.jfif", quote: "æ”¾é¬†å¿ƒæƒ…ï¼Œäº«å—ç•¶ä¸‹çš„æ¯ä¸€åˆ»ã€‚" }
        ];

        const TIPPING_GUIDE = [
          { role: "æ½›æ°´æ•™ç·´ / å°ŽéŠ", amount: "10-20 USD/æ¬¡", note: "è¡Œç¨‹çµæŸå¾Œçµ¦ï¼Œé¿å…åªçµ¦1ç¾Žå…ƒ" },
          { role: "é¤å»³æœå‹™ç”Ÿ", amount: "5-10 USD/æ¬¡", note: "å£“åœ¨æ¡Œä¸Šï¼Œç•™æ„å¸³å–®æ˜¯å¦å·²å«æœå‹™è²»" },
          { role: "ç®¡å®¶ (Butler)", amount: "10 USD/å¤©èµ·", note: "é›¢å³¶ç•¶å¤©ä¸€æ¬¡æ€§çµ¦" },
          { role: "æˆ¿å‹™å“¡", amount: "5 USD/æ¬¡", note: "æ”¾åºŠé ­æˆ–æž•é ­ä¸‹" },
          { role: "è¡ŒæŽæ¬é‹", amount: "5-10 USD/æ¬¡", note: "è¦–è¡ŒæŽæ•¸é‡å¢žåŠ " },
          { role: "Buggy æŽ¥é€", amount: "5 USD/è¶Ÿ", note: "è¦–è·é›¢èˆ‡æ…‹åº¦" },
        ];

        const ITINERARY = [
          {
            day: 1,
            date: "12/27 (å…­)",
            location: "Taipei -> Singapore -> MalÃ©",
            events: [
              {
                time: "14:10",
                endTime: "18:55",
                type: "flight",
                title: "TPE -> SIN",
                subtitle: "SQ877 | é£›è¡Œ 4h 45m",
                location: "Taoyuan Int. Airport T2",
                icon: Plane,
                details: {
                  info: "æ–°åŠ å¡èˆªç©º SQ877",
                  seat: "é é¸åº§ä½: 45A, 45C",
                  notes: "æŠµé”æ–°åŠ å¡æ¨Ÿå®œæ©Ÿå ´ T3ã€‚è½‰æ©Ÿæ™‚é–“ 1å°æ™‚45åˆ†ï¼Œè«‹ç›¡é€Ÿå‰å¾€ T2 ç™»æ©Ÿé–€ã€‚",
                }
              },
              {
                time: "18:55",
                endTime: "20:40",
                type: "transit",
                title: "æ¨Ÿå®œæ©Ÿå ´è½‰æ©Ÿ",
                subtitle: "åœç•™ 1h 45m",
                location: "Changi Airport",
                icon: Coffee,
                image: "changi_airport_terminal.jpg",
                details: {
                  info: "å¿«é€Ÿè½‰æ©Ÿæç¤º",
                  notes: "åˆ©ç”¨ Skytrain å¾€è¿”èˆªå»ˆã€‚å»ºè­°ä¸é›¢é–‹ç®¡åˆ¶å€ã€‚",
                }
              },
              {
                time: "20:40",
                endTime: "22:15",
                type: "flight",
                title: "SIN -> MLE",
                subtitle: "SQ438 | é£›è¡Œ 4h 35m",
                location: "Changi Airport T2",
                icon: Plane,
                details: {
                  info: "æ–°åŠ å¡èˆªç©º SQ438",
                  seat: "é é¸åº§ä½: 52H, 52K",
                  notes: "æŠµé”é¦¬åˆ—éŸ‹æ‹‰ç´åœ‹éš›æ©Ÿå ´ (Velana Int. Airport)ã€‚è¨˜å¾—å¡«å¯« IMUGA å…¥å¢ƒç”³å ±ã€‚",
                  link: "https://www.stan-travel.com/imuga-maldives-immigration/"
                }
              },
              {
                time: "23:00",
                type: "hotel",
                title: "å…¥ä½ Lonuveli",
                subtitle: "Hulhumale",
                location: "Lonuveli Hotel",
                icon: Hotel,
                image: "hotel-lonuveli-outside.jpg",
                details: {
                  info: "ç¬¬ä¸€æ™šéŽå¢ƒä½å®¿",
                  notes: "ä½æ–¼èƒ¡é­¯é¦¬åˆ© (Hulhumale)ï¼Œè·é›¢æ©Ÿå ´ç´„ 15 åˆ†é˜è»Šç¨‹ã€‚é£¯åº—æä¾›æŽ¥é§ã€‚",
                }
              }
            ]
          },
          {
            day: 2,
            date: "12/28 (æ—¥)",
            location: "MalÃ© -> Meeru Island",
            events: [
              {
                time: "09:00",
                type: "transport",
                title: "å¿«è‰‡/æ°´é£›å‰å¾€æ¸¡å‡æ‘",
                subtitle: "å‰å¾€ Meeru Island",
                location: "Velana Int. Airport Docks",
                icon: Navigation,
                details: {
                  info: "åº¦å‡æ‘æŽ¥é§",
                  notes: "è«‹æ–¼å¤§å»³ç­‰å€™å·¥ä½œäººå“¡å¼•å°Žã€‚èˆ¹ç¨‹ç´„ 55 åˆ†é˜ã€‚",
                }
              },
              {
                time: "14:00",
                type: "hotel",
                title: "Check-in Meeru Maldives",
                subtitle: "é–‹å§‹åº¦å‡æ¨¡å¼",
                location: "Meeru Maldives Resort Island",
                icon: Hotel,
                image: "Meeru2-672x428.jpg",
                details: {
                  info: "Meeru Maldives Resort Island",
                  notes: "å…¨åŒ…å¼åº¦å‡æ‘ã€‚ç¢ºèªé¤é£²æ–¹æ¡ˆåŒ…å«å…§å®¹ã€‚é›»å£“ 220Vï¼Œæº–å‚™è¬ç”¨è½‰æŽ¥é ­ã€‚",
                }
              },
              {
                time: "18:00",
                type: "activity",
                title: "å¤•é™½æ™šé¤",
                subtitle: "Resort Dining",
                location: "Meeru Maldives Resort Island",
                icon: Utensils,
                details: {
                  info: "æ™šé¤æ™‚æ®µ",
                  notes: "è¨˜å¾—çµ¦äºˆæœå‹™ç”Ÿå°è²» (å»ºè­° 5-10 USD)ã€‚",
                }
              }
            ]
          },
          {
            day: 3,
            date: "12/29 (ä¸€)",
            location: "Meeru Island",
            events: [
              {
                time: "10:00",
                type: "activity",
                title: "å‡ºæµ·æµ®æ½› / æ°´ä¸Šæ´»å‹•",
                subtitle: "äº«å—å°åº¦æ´‹",
                location: "Meeru Maldives House Reef",
                icon: Waves,
                details: {
                  info: "æ°´ä¸Šæ´»å‹•",
                  notes: "é˜²æ›¬å»ºè­°ç©¿è‘—æ°´æ¯è¡£ã€‚æ³¨æ„æ´‹æµã€‚æ•™ç·´å°è²»å»ºè­° 10-20 USDã€‚",
                }
              },
              {
                time: "15:00",
                type: "relax",
                title: "æ²™ç˜æ”¾é¬† / SPA",
                subtitle: "è‡ªç”±æ´»å‹•",
                location: "Meeru Maldives Resort Island",
                icon: Sun,
                details: {
                  info: "ä¼‘é–’æ™‚å…‰",
                  notes: "å¯ä»¥åœ¨é…’å§äº«ç”¨é£²å“ï¼Œæˆ–é ç´„å³¶ä¸Š SPAã€‚",
                }
              }
            ]
          },
          {
            day: 4,
            date: "12/30 (äºŒ)",
            location: "Meeru Island",
            events: [
              {
                time: "ALL DAY",
                type: "activity",
                title: "å…¨æ—¥åº¦å‡æ‘é«”é©—",
                subtitle: "Meeru Island",
                location: "Meeru Maldives Resort Island",
                icon: Camera,
                details: {
                  info: "æŽ¢ç´¢å³¶å¶¼",
                  notes: "åƒè§€å³¶ä¸Šåšç‰©é¤¨ã€éª¨æž¶é…’å§ï¼Œæˆ–åƒåŠ é»ƒæ˜åž‚é‡£æ´»å‹•ã€‚",
                }
              }
            ]
          },
          {
            day: 5,
            date: "12/31 (ä¸‰)",
            location: "Meeru Island",
            events: [
              {
                time: "10:00",
                endTime: "12:00",
                type: "activity",
                title: "åƒè§€ Dhiffushi å±…æ°‘å³¶",
                subtitle: "Island Hopping",
                location: "Dhiffushi Island",
                icon: Camera,
                image: "Dhiffushi.png",
                details: {
                  info: "å±…æ°‘å³¶æ–‡åŒ–é«”é©—",
                  notes: "é¦¬çˆ¾åœ°å¤«å±…æ°‘å³¶æ˜¯æŽ¢ç´¢ç•¶åœ°æ–‡åŒ–ã€ç”Ÿæ´»æ–¹å¼èˆ‡è—è¡“çš„çµ•ä½³åŽ»è™•ã€‚æ‹œè¨ªé„°è¿‘å³¶å¶¼ï¼Œçœ‹çœ‹ç•¶åœ°å±…æ°‘å¦‚ä½•åœ¨å‚³çµ±çš„ç”Ÿæ´»æ­¥èª¿ä¸­å…±åŒå·¥ä½œèˆ‡ç”Ÿæ´»ã€‚\nåœ¨ Dhiffushi å³¶ä¸Šï¼Œå°‡æœ‰æ©Ÿæœƒåœ¨ç•¶åœ°å•†åº—è³¼è²·ç´€å¿µå“ï¼Œè«‹è¨˜å¾—æ”œå¸¶ç¾Žé‡‘ç¾é‡‘å‰å¾€è³¼ç‰©ã€‚\næœè£è¦å®šï¼šåƒè§€å±…æ°‘å³¶æ™‚ï¼Œå¥³æ€§è‡³å°‘éœ€ç©¿è‘—çŸ­è¢–ä¸Šè¡£åŠéŽè†çŸ­è¤²ï¼Œç”·æ€§å‰‡éœ€ç©¿è‘—çŸ­è¤²ã€‚æ³¨æ„ï¼šç©¿è‘—èˆ‡ç”Ÿç†æ€§åˆ¥ç›¸ç•°çš„æœè£å°‡æœƒé•åæ²™é‡Œäºžæ³•ã€‚",
                }
              },
              {
                time: "20:00",
                type: "party",
                title: "è·¨å¹´æ™šå®´",
                subtitle: "New Year's Eve",
                location: "Meeru Maldives Resort Island",
                icon: Utensils,
                image: "year end dinner.png",
                details: {
                  info: "Gala Dinner",
                  notes: "æ…¶ç¥ 2026 åˆ°ä¾†ï¼é€šå¸¸æœƒæœ‰ç‰¹åˆ¥è¡¨æ¼”èˆ‡è‡ªåŠ©é¤ã€‚",
                }
              }
            ]
          },
          {
            day: 6,
            date: "01/01 (å››)",
            location: "MalÃ© -> Singapore",
            events: [
              {
                time: "09:00",
                type: "transport",
                title: "è¿”å›žé¦¬åˆ—æ©Ÿå ´",
                subtitle: "Check-out & Transfer",
                location: "Velana Int. Airport",
                icon: Navigation,
                details: {
                  info: "é€€æˆ¿",
                  notes: "çµæ¸…å³¶ä¸Šæ¶ˆè²»å¸³å–®ã€‚çµ¦äºˆç®¡å®¶/è¡ŒæŽå“¡å°è²»ã€‚",
                }
              },
              {
                time: "12:55",
                endTime: "20:45",
                type: "flight",
                title: "MLE -> SIN",
                subtitle: "SQ431 | é£›è¡Œ 4h 50m",
                location: "Velana Int. Airport",
                icon: Plane,
                image: "changi_airport_terminal.jpg",
                details: {
                  info: "æ–°åŠ å¡èˆªç©º SQ431",
                  seat: "é é¸åº§ä½",
                  notes: "å†æ¬¡å…¥å¢ƒæ–°åŠ å¡ã€‚éœ€å¡«å¯«æ–°åŠ å¡å…¥å¢ƒå¡ (SG Arrival Card)ã€‚ç”±æ–¼è¡ŒæŽç›´æŽ›ï¼Œå…¥å¢ƒæ™‚æ‹¿ä¸åˆ°å¤§ä»¶è¡ŒæŽã€‚è«‹å‹™å¿…åœ¨éš¨èº«è¡ŒæŽä¸­æº–å‚™å¥½åœ¨ Crowne Plaza éŽå¤œæ‰€éœ€çš„æ›æ´—è¡£ç‰©å’Œç›¥æ´—ç”¨å“ã€‚",
                  link: "https://www.ica.gov.sg/eservicesandforms/sgarrivalcard"
                }
              },
              {
                time: "22:00",
                type: "hotel",
                title: "å…¥ä½æ¨Ÿå®œæ©Ÿå ´çš‡å† å‡æ—¥",
                subtitle: "Crowne Plaza Changi",
                location: "Crowne Plaza Changi Airport",
                icon: Hotel,
                image: "Crowne Plaza.jpg",
                details: {
                  info: "éŽå¢ƒä½å®¿",
                  notes: "ä½æ–¼ T3 èˆªå»ˆæ—ï¼Œäº¤é€šæ¥µå…¶ä¾¿åˆ©ã€‚å¥½å¥½ä¼‘æ¯æº–å‚™æ˜Žæ—¥è¿”å°ã€‚",
                }
              }
            ]
          },
          {
            day: 7,
            date: "01/02 (äº”)",
            location: "Singapore -> Taipei",
            events: [
              {
                time: "06:30",
                type: "hotel",
                title: "Crowne Plaza é€€æˆ¿",
                subtitle: "å‰å¾€èˆªå»ˆè¾¦ç†å‡ºå¢ƒ",
                location: "Crowne Plaza Changi Airport",
                icon: Navigation,
                details: {
                  info: "è¾¦ç†é€€æˆ¿æ‰‹çºŒ",
                  notes: "é€€æˆ¿å¾Œéœ€å†æ¬¡è¾¦ç†å‡ºå¢ƒæ‰‹çºŒä¸¦é€²è¡Œå®‰æª¢ï¼Œæ‰èƒ½å›žåˆ°ç®¡åˆ¶å€æ­æ©Ÿå›žå°åŒ—ã€‚",
                }
              },
              {
                time: "08:30",
                endTime: "12:55",
                type: "flight",
                title: "SIN -> TPE",
                subtitle: "SQ876 | é£›è¡Œ 4h 25m",
                location: "Changi Airport T3",
                icon: Plane,
                image: "changi_airport_terminal.jpg",
                details: {
                  info: "æ–°åŠ å¡èˆªç©º SQ876",
                  seat: "é é¸åº§ä½",
                  notes: "æ—…ç¨‹çµæŸï¼Œå¹³å®‰è¿”å®¶ã€‚",
                }
              }
            ]
          }
        ];

        // --- Components ---

        const Modal = ({ isOpen, onClose, data }) => {
          if (!isOpen || !data) return null;

          // Special rendering for Friend profile
          if (data.type === 'friend') {
             return React.createElement("div", { className: "fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/60 backdrop-blur-sm animate-fade-in" },
                React.createElement("div", { className: "bg-white rounded-2xl w-full max-w-sm overflow-hidden shadow-2xl transform transition-all animate-slide-up p-6 text-center" },
                   React.createElement("div", { className: "relative w-32 h-32 mx-auto mb-4" },
                      React.createElement("img", { 
                        src: data.image, 
                        className: "w-full h-full object-cover rounded-full border-4 border-teal-500 shadow-lg"
                      })
                   ),
                   React.createElement("h3", { className: "text-2xl font-bold text-gray-800 mb-2" }, data.title),
                   React.createElement("div", { className: "bg-teal-50 p-4 rounded-xl text-teal-800 italic relative" },
                      React.createElement("span", { className: "text-4xl absolute -top-2 left-2 opacity-20" }, "â€œ"),
                      React.createElement("p", { className: "text-lg font-medium" }, data.details.quote),
                      React.createElement("span", { className: "text-4xl absolute -bottom-6 right-2 opacity-20" }, "â€")
                   ),
                   React.createElement("button", { 
                     onClick: onClose,
                     className: "mt-6 bg-gray-200 text-gray-700 px-6 py-2 rounded-full font-bold hover:bg-gray-300 transition"
                   }, "é—œé–‰")
                )
             );
          }

          return React.createElement("div", { className: "fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/60 backdrop-blur-sm animate-fade-in" },
            React.createElement("div", { className: "bg-white rounded-2xl w-full max-w-sm overflow-hidden shadow-2xl transform transition-all animate-slide-up" },
               // Hero Image in Modal if available (Optional, currently showing in card list is better, but let's keep modal clean or add it here too)
              data.image && React.createElement("img", { src: data.image, className: "w-full h-48 object-cover" }),
              
              React.createElement("div", { className: "bg-teal-600 p-4 text-white flex justify-between items-center " + (data.image ? "" : "rounded-t-2xl") },
                React.createElement("h3", { className: "text-lg font-bold" }, data.title),
                React.createElement("button", { onClick: onClose, className: "p-1 hover:bg-teal-700 rounded-full" },
                  React.createElement(X, { size: 20 })
                )
              ),
              React.createElement("div", { className: "p-5 space-y-4" },
                React.createElement("div", { className: "flex items-center text-teal-700 font-medium" },
                  React.createElement("span", { className: "bg-teal-100 p-2 rounded-lg mr-3" },
                    React.createElement(data.icon, { size: 20 })
                  ),
                  data.subtitle
                ),
                React.createElement("div", { className: "space-y-2 text-gray-600 text-sm" },
                   React.createElement("p", { className: "font-semibold text-gray-800" }, "è©³ç´°è³‡è¨Šï¼š"),
                   React.createElement("p", null, data.details?.info),
                   React.createElement("div", { className: "border-l-4 border-yellow-400 pl-3 py-1 bg-yellow-50 text-gray-700 rounded-r whitespace-pre-line" },
                     data.details?.notes
                   ),
                   data.details?.seat && React.createElement("p", { className: "text-xs bg-gray-100 p-2 rounded inline-block" }, "ðŸ’º " + data.details.seat)
                ),
                data.details?.link && React.createElement("a", { 
                    href: data.details.link, 
                    target: "_blank", 
                    rel: "noreferrer",
                    className: "block w-full text-center py-3 bg-teal-600 text-white rounded-xl font-semibold hover:bg-teal-700 transition"
                  }, "é–‹å•Ÿç›¸é—œé€£çµ"
                ),
                React.createElement("a", { 
                    href: `https://www.google.com/maps/search/?api=1&query=${encodeURIComponent(data.location)}`,
                    target: "_blank",
                    rel: "noreferrer",
                    className: "flex items-center justify-center gap-2 w-full py-3 border border-gray-300 text-gray-700 rounded-xl font-semibold hover:bg-gray-50 transition"
                  },
                  React.createElement(MapPin, { size: 16 }), " é–‹å•Ÿåœ°åœ–å°Žèˆª"
                )
              )
            )
          );
        };

        const TimelineItem = ({ event, isLast, onOpenModal }) => {
          const Icon = event.icon;
          
          return React.createElement("div", { className: "relative pl-6 pb-8" },
            !isLast && React.createElement("div", { className: "absolute left-[11px] top-8 bottom-0 w-0.5 bg-gray-200" }),
            React.createElement("div", { className: "absolute left-0 top-0 w-6 h-6 rounded-full bg-white border-2 border-teal-500 flex items-center justify-center z-10 shadow-sm" },
              React.createElement("div", { className: "w-2 h-2 rounded-full bg-teal-500" })
            ),
            React.createElement("div", { className: "flex flex-col sm:flex-row gap-3" },
              React.createElement("div", { className: "min-w-[60px] pt-0.5" },
                React.createElement("span", { className: "font-bold text-gray-800 text-base" }, event.time),
                event.endTime && React.createElement("div", { className: "text-xs text-gray-400" }, event.endTime)
              ),
              React.createElement("div", { 
                onClick: () => onOpenModal(event),
                className: "flex-1 bg-white rounded-xl shadow-md border border-gray-100 active:scale-[0.98] transition-transform cursor-pointer hover:shadow-lg group overflow-hidden"
              },
                // Image Section in Card
                event.image && React.createElement("div", { className: "h-32 w-full overflow-hidden" },
                    React.createElement("img", { 
                        src: event.image, 
                        alt: event.title,
                        className: "w-full h-full object-cover group-hover:scale-105 transition-transform duration-500"
                    })
                ),
                React.createElement("div", { className: "p-4" },
                    React.createElement("div", { className: "flex justify-between items-start mb-2" },
                    React.createElement("div", null,
                        React.createElement("h4", { className: "font-bold text-gray-900 group-hover:text-teal-600 transition-colors" }, event.title),
                        React.createElement("p", { className: "text-sm text-teal-600 font-medium" }, event.subtitle)
                    ),
                    React.createElement(Icon, { className: "text-gray-400 group-hover:text-teal-500", size: 20 })
                    ),
                    React.createElement("div", { className: "flex items-center text-xs text-gray-500 mt-2" },
                    React.createElement(MapPin, { size: 12, className: "mr-1" }),
                    event.location
                    )
                )
              )
            )
          );
        };

        const InfoCard = ({ icon: Icon, title, children, color = "teal" }) => {
            return React.createElement("div", { className: "bg-white rounded-xl p-5 shadow-sm border border-gray-100 mb-4" },
                React.createElement("div", { className: "flex items-center gap-3 mb-3 border-b border-gray-100 pb-2" },
                    React.createElement("div", { className: `p-2 rounded-lg bg-${color}-50 text-${color}-600` },
                        React.createElement(Icon, { size: 20 })
                    ),
                    React.createElement("h3", { className: "font-bold text-gray-800" }, title)
                ),
                React.createElement("div", { className: "text-sm text-gray-600 leading-relaxed" }, children)
            );
        };

        const App = () => {
          const [activeTab, setActiveTab] = useState(0); 
          const [modalData, setModalData] = useState(null);
          const [isModalOpen, setIsModalOpen] = useState(false);
          const scrollContainerRef = useRef(null);

          const currentDayData = ITINERARY[activeTab];
          
          const getLocationWeather = (locStr) => {
            if (locStr.includes("Taipei")) return WEATHER_MOCK["Taipei"];
            if (locStr.includes("Singapore")) return WEATHER_MOCK["Singapore"];
            if (locStr.includes("Meeru")) return WEATHER_MOCK["Meeru Island"];
            if (locStr.includes("MalÃ©")) return WEATHER_MOCK["MalÃ©"];
            return WEATHER_MOCK["MalÃ©"];
          };

          const currentWeather = currentDayData ? getLocationWeather(currentDayData.location) : WEATHER_MOCK["MalÃ©"];
          const WeatherIcon = currentWeather.icon;

          const handleOpenModal = (data) => {
            setModalData(data);
            setIsModalOpen(true);
          };
          
          const handleOpenFriendModal = (friend) => {
             setModalData({
                type: 'friend',
                title: friend.name,
                image: friend.image,
                details: { quote: friend.quote }
             });
             setIsModalOpen(true);
          };

          useEffect(() => {
            window.scrollTo({ top: 0, behavior: 'smooth' });
          }, [activeTab]);

          return React.createElement("div", { className: "min-h-screen bg-slate-50 pb-24 font-sans text-slate-900" },
            // Hero Section
            React.createElement("div", { className: "relative bg-gradient-to-br from-teal-600 to-cyan-700 text-white rounded-b-[2.5rem] shadow-xl overflow-hidden" },
              React.createElement("div", { className: "absolute top-0 left-0 w-full h-full opacity-10" },
                 React.createElement("svg", { className: "w-full h-full", viewBox: "0 0 100 100", preserveAspectRatio: "none" },
                   React.createElement("path", { d: "M0 100 C 20 0 50 0 100 100 Z", fill: "white" })
                 )
              ),
              React.createElement("div", { className: "relative px-6 pt-12 pb-16" },
                React.createElement("div", { className: "flex justify-between items-start" },
                  React.createElement("div", null,
                    React.createElement("p", { className: "text-teal-100 text-sm font-medium tracking-wider uppercase mb-1" }, "Current Trip"),
                    React.createElement("h1", { className: "text-3xl font-bold" }, "Maldives 2025 Year End"),
                    activeTab < 7 ? React.createElement("div", { className: "mt-2 flex items-center gap-2 text-teal-50" },
                       React.createElement("span", { className: "bg-white/20 px-2 py-0.5 rounded text-sm" }, currentDayData.date),
                       React.createElement("span", { className: "text-sm truncate max-w-[150px]" }, currentDayData.location.split('->')[0])
                    ) : React.createElement("div", { className: "mt-2 text-teal-50" }, activeTab === 7 ? "Travel Guide" : "Travel Buddies")
                  ),
                  activeTab < 7 && React.createElement("div", { className: "flex flex-col items-center bg-white/10 backdrop-blur-md rounded-xl p-3 border border-white/20" },
                    React.createElement(WeatherIcon, { size: 24, className: "text-yellow-300 mb-1" }),
                    React.createElement("span", { className: "text-xl font-bold" }, currentWeather.temp),
                    React.createElement("span", { className: "text-xs text-teal-100" }, currentWeather.cond)
                  )
                )
              )
            ),

            // Main Content
            React.createElement("div", { className: "px-5 -mt-8 relative z-10" },
              
              // ITINERARY VIEW (Days 1-7)
              activeTab < 7 && React.createElement("div", { className: "bg-white/80 backdrop-blur-sm rounded-t-3xl min-h-[500px] p-2" },
                 React.createElement("div", { className: "mt-6" },
                   currentDayData.events.map((event, index) => 
                     React.createElement(TimelineItem, { 
                       key: index, 
                       event: event, 
                       isLast: index === currentDayData.events.length - 1,
                       onOpenModal: handleOpenModal
                     })
                   ),
                   React.createElement("div", { className: "text-center mt-8 mb-4" },
                      React.createElement("div", { className: "inline-block p-2 bg-teal-50 rounded-full text-teal-300" },
                        React.createElement(Moon, { size: 20 })
                      ),
                      React.createElement("p", { className: "text-xs text-gray-400 mt-2" }, "End of " + currentDayData.date)
                   )
                 )
              ),

              // INFO VIEW
              activeTab === 7 && React.createElement("div", { className: "space-y-4 pt-4" },
                 // IMUGA Card
                 React.createElement("div", { className: "bg-gradient-to-r from-blue-600 to-blue-500 rounded-xl p-5 text-white shadow-lg" },
                    React.createElement("div", { className: "flex justify-between items-start" },
                      React.createElement("div", null,
                        React.createElement("h3", { className: "font-bold text-lg" }, "IMUGA å…¥å¢ƒç”³å ±"),
                        React.createElement("p", { className: "text-blue-100 text-sm mt-1" }, "é¦¬çˆ¾åœ°å¤«å…¥å¢ƒå¿…å‚™ï¼Œéœ€åœ¨ç­æ©ŸæŠµé”å‰ 96 å°æ™‚å…§å¡«å¯«ã€‚")
                      ),
                      React.createElement(Globe, { className: "text-blue-200" })
                    ),
                    React.createElement("a", { 
                      href: "https://www.stan-travel.com/imuga-maldives-immigration/", 
                      target: "_blank", 
                      rel: "noreferrer",
                      className: "mt-4 block w-full bg-white text-blue-600 text-center py-2 rounded-lg font-bold text-sm"
                    }, "å‰å¾€å¡«å¯«")
                 ),

                 // SG Arrival Card
                 React.createElement("div", { className: "bg-gradient-to-r from-red-600 to-red-500 rounded-xl p-5 text-white shadow-lg" },
                    React.createElement("div", { className: "flex justify-between items-start" },
                      React.createElement("div", null,
                        React.createElement("h3", { className: "font-bold text-lg" }, "SGAC æ–°åŠ å¡é›»å­å…¥å¢ƒå¡"),
                        React.createElement("p", { className: "text-red-100 text-sm mt-1" }, "æ–°åŠ å¡å…¥å¢ƒå¿…å‚™ï¼Œéœ€åœ¨ç­æ©ŸæŠµé”å‰ 72 å°æ™‚å…§å¡«å¯«ã€‚")
                      ),
                      React.createElement(Globe, { className: "text-red-200" })
                    ),
                    React.createElement("a", { 
                      href: "https://eservices.ica.gov.sg/sgarrivalcard/", 
                      target: "_blank", 
                      rel: "noreferrer",
                      className: "mt-4 block w-full bg-white text-red-600 text-center py-2 rounded-lg font-bold text-sm"
                    }, "å‰å¾€å¡«å¯«")
                 ),

                 React.createElement(InfoCard, { icon: Sun, title: "æ°£å€™èˆ‡ç©¿è‘—", color: "orange" },
                   React.createElement("p", null, "å…¨å¹´å‡æº« 26ï½ž32 â„ƒï¼Œæº–å‚™å¤å­£ä¼‘é–’æœè£å³å¯ã€‚å»ºè­°æ”œå¸¶è–„å¤–å¥—é˜²æ›¬åŠé£›æ©Ÿä¸Šç¦¦å¯’ã€‚")
                 ),

                 React.createElement(InfoCard, { icon: CreditCard, title: "è²¨å¹£èˆ‡æ¶ˆè²»", color: "green" },
                   React.createElement("p", { className: "mb-2" }, React.createElement("strong", null, "åŒ¯çŽ‡ï¼š"), "1 USD â‰ˆ 15.2 MVRã€‚"),
                   React.createElement("p", { className: "mb-2" }, "å¤§å¤šæ•¸åº—å®¶æ”¶ç¾Žå…ƒï¼Œä¸éœ€ç‰¹æ›ç›§è²äºžã€‚æ³¨æ„ï¼šç•¶åœ°åªæ”¶", React.createElement("strong", null, "ç¾Žå…ƒæ–°éˆ”"), "ï¼ŒèˆŠéˆ”ã€æœ‰æ‘ºç—•æˆ–ç ´ææœƒè¢«æ‹’æ”¶ã€‚ç›§è²äºžç‚ºå¡‘è† éˆ”ç¥¨ï¼Œä»¥ä¸‹ç‚ºå…¨å¥—çš„å„é¢é¡éˆ”ç¥¨ã€‚"),
                   React.createElement("img", { src: "rufiyaa.jpg", alt: "Maldivian Rufiyaa Banknotes", className: "w-full rounded-lg mt-3 shadow-md border border-gray-100" })
                 ),

                 React.createElement(InfoCard, { icon: Zap, title: "é›»å£“èˆ‡æ’åº§", color: "yellow" },
                    React.createElement("p", null, "220/240Vã€‚ä¸‰æ’å¼æˆ–äºŒåœ“å­”å¼ï¼ˆèˆ‡æ–°åŠ å¡åŒï¼‰ã€‚è«‹è‡ªå‚™åœ‹éš›è¬ç”¨è½‰æŽ¥æ’é ­ã€‚")
                 ),

                 React.createElement(InfoCard, { icon: CreditCard, title: "å°è²»æŒ‡å— (å»ºè­°æº–å‚™ç™¾å…ƒç¾Žé‡‘å°éˆ”)", color: "teal" },
                   React.createElement("div", { className: "overflow-x-auto" },
                     React.createElement("table", { className: "w-full text-left text-xs" },
                       React.createElement("thead", null,
                         React.createElement("tr", { className: "border-b border-gray-200 text-gray-500" },
                           React.createElement("th", { className: "pb-2" }, "å°è±¡"),
                           React.createElement("th", { className: "pb-2" }, "å»ºè­°é‡‘é¡")
                         )
                       ),
                       React.createElement("tbody", { className: "divide-y divide-gray-100" },
                         TIPPING_GUIDE.map((tip, idx) => 
                           React.createElement("tr", { key: idx },
                             React.createElement("td", { className: "py-2 pr-2 font-medium" }, tip.role),
                             React.createElement("td", { className: "py-2 text-gray-500" },
                               React.createElement("span", { className: "font-bold text-teal-600 block" }, tip.amount),
                               React.createElement("span", { className: "text-[10px]" }, tip.note)
                             )
                           )
                         )
                       )
                     )
                   )
                 )
              ),

              // FRIENDS VIEW
              activeTab === 8 && React.createElement("div", { className: "pt-4" },
                 React.createElement("div", { className: "grid grid-cols-2 gap-4" },
                    FRIENDS_DATA.map((friend, idx) => 
                       React.createElement("div", { 
                          key: idx, 
                          className: "bg-white rounded-2xl p-4 shadow-md flex flex-col items-center cursor-pointer hover:shadow-lg transition-all active:scale-95",
                          onClick: () => handleOpenFriendModal(friend)
                       },
                          React.createElement("div", { className: "w-24 h-24 rounded-full overflow-hidden mb-3 border-2 border-teal-100" },
                             React.createElement("img", { src: friend.image, alt: friend.name, className: "w-full h-full object-cover" })
                          ),
                          React.createElement("h3", { className: "font-bold text-gray-800" }, friend.name),
                          React.createElement("span", { className: "text-xs text-teal-500 mt-1" }, "é»žæ“ŠæŸ¥çœ‹")
                       )
                    )
                 )
              )
            ),

            // Bottom Nav
            React.createElement("div", { className: "fixed bottom-0 left-0 right-0 bg-white border-t border-gray-200 px-2 py-2 pb-safe z-40 shadow-[0_-5px_15px_rgba(0,0,0,0.05)]" },
              React.createElement("div", { ref: scrollContainerRef, className: "flex overflow-x-auto gap-2 no-scrollbar px-2" },
                ITINERARY.map((day, idx) => 
                  React.createElement("button", {
                    key: idx,
                    onClick: () => setActiveTab(idx),
                    className: `flex-shrink-0 flex flex-col items-center justify-center w-14 h-14 rounded-2xl transition-all duration-300 ${
                      activeTab === idx 
                        ? 'bg-teal-600 text-white shadow-lg shadow-teal-200 scale-105' 
                        : 'bg-gray-50 text-gray-400 hover:bg-gray-100'
                    }`
                  },
                    React.createElement("span", { className: "text-[10px] font-bold uppercase" }, "Day"),
                    React.createElement("span", { className: "text-lg font-bold leading-none" }, day.day)
                  )
                ),
                React.createElement("button", {
                  onClick: () => setActiveTab(7),
                  className: `flex-shrink-0 flex flex-col items-center justify-center w-14 h-14 rounded-2xl transition-all duration-300 ${
                    activeTab === 7
                      ? 'bg-blue-600 text-white shadow-lg shadow-blue-200 scale-105' 
                      : 'bg-gray-50 text-gray-400 hover:bg-gray-100'
                  }`
                },
                  React.createElement(Info, { size: 24 }),
                  React.createElement("span", { className: "text-[9px] font-bold mt-0.5" }, "INFO")
                ),
                React.createElement("button", {
                  onClick: () => setActiveTab(8),
                  className: `flex-shrink-0 flex flex-col items-center justify-center w-14 h-14 rounded-2xl transition-all duration-300 ${
                    activeTab === 8
                      ? 'bg-purple-600 text-white shadow-lg shadow-purple-200 scale-105' 
                      : 'bg-gray-50 text-gray-400 hover:bg-gray-100'
                  }`
                },
                  React.createElement(Users, { size: 24 }),
                  React.createElement("span", { className: "text-[9px] font-bold mt-0.5" }, "Friends")
                )
              )
            ),

            // Modal
            React.createElement(Modal, { isOpen: isModalOpen, onClose: () => setIsModalOpen(false), data: modalData })
          );
        };

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(React.createElement(App));
    </script>
</body>
</html>